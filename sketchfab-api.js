/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){e["sketchfab-iframe"]=t()})(this,function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("vendors/almond/almond",function(){}),function(e){"function"==typeof bootstrap?bootstrap("promise",e):"object"==typeof exports?e(void 0,exports):"function"==typeof n?n("vendors/q/q.min",e):"undefined"!=typeof ses?ses.ok()&&(ses.makeQ=function(){return e(void 0,{})}):e(void 0,Q={})}(function(e,t){function n(e,t){t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(I)&&(e.stack=r(e.stack)+"\n"+I+"\n"+r(t.stack))}function r(e){for(var e=e.split("\n"),t=[],n=0;n<e.length;++n){var r=e[n],i;if(i=/at .+ \((.*):(\d+):\d+\)/.exec(r)){var s=i[2];i=i[1]===x&&s>=S&&s<=X}else i=!1;!i&&-1===r.indexOf("(module.js:")&&-1===r.indexOf("(node.js:")&&t.push(r)}return t.join("\n")}function i(){if(Error.captureStackTrace){var e,t,n=Error.prepareStackTrace;return Error.prepareStackTrace=function(n,r){e=r[1].getFileName(),t=r[1].getLineNumber()},Error().stack,Error.prepareStackTrace=n,x=e,t}}function s(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",Error("").stack),e.apply(e,arguments)}}function o(){function e(e){t&&(r=p(e),_(t,function(e,t){C(function(){r.promiseDispatch.apply(r,t)})},void 0),n=t=void 0)}var t=[],n=[],r,i=H(o.prototype),s=H(u.prototype);return s.promiseDispatch=function(e,i,s){var o=M(arguments);t?(t.push(o),"when"===i&&s[1]&&n.push(s[1])):C(function(){r.promiseDispatch.apply(r,o)})},s.valueOf=function(){return t?s:r.valueOf()},Error.captureStackTrace&&(Error.captureStackTrace(s,o),s.stack=s.stack.substring(s.stack.indexOf("\n")+1)),N(s),i.promise=s,i.resolve=e,i.reject=function(t){e(h(t))},i.notify=function(e){t&&_(n,function(t,n){C(function(){n(e)})},void 0)},i}function u(e,t,n,r){void 0===t&&(t=function(e){return h(Error("Promise does not support operation: "+e))});var i=H(u.prototype);return i.promiseDispatch=function(n,r,s){var o;try{o=e[r]?e[r].apply(i,s):t.call(i,r,s)}catch(u){o=h(u)}n&&n(o)},n&&(i.valueOf=n),r&&(i.exception=r),N(i),i}function a(e){return f(e)?e.valueOf():e}function f(e){return e&&"function"==typeof e.promiseDispatch}function l(e){return!f(a(e))}function c(e){return e=a(e),f(e)&&"exception"in e}function h(e){var e=e||Error(),t=u({when:function(t){if(t){var n=D(q,this);-1!==n&&(R.splice(n,1),q.splice(n,1))}return t?t(e):h(e)}},function(){return h(e)},function(){return this},e);return!U&&"undefined"!=typeof window&&!window.Touch&&window.console&&console.log("Should be empty:",R),U=!0,q.push(t),R.push(e),t}function p(e){if(f(e))return e;if((e=a(e))&&"function"==typeof e.then){var t=o();return e.then(t.resolve,t.reject,t.notify),t.promise}return u({when:function(){return e},get:function(t){return e[t]},put:function(t,n){return e[t]=n,e},del:function(t){return delete e[t],e},post:function(t,n){return e[t].apply(e,n)},apply:function(t){return e.apply(void 0,t)},keys:function(){return B(e)}},void 0,function(){return e})}function d(e,t,r,i){function s(e){try{return t?t(e):e}catch(n){return h(n)}}function u(e){if(r){n(e,l);try{return r(e)}catch(t){return h(t)}}return h(e)}var a=o(),f=!1,l=p(e);return C(function(){l.promiseDispatch(function(e){f||(f=!0,a.resolve(s(e)))},"when",[function(e){f||(f=!0,a.resolve(u(e)))}])}),l.promiseDispatch(void 0,"when",[void 0,function(e){a.notify(i?i(e):e)}]),a.promise}function v(e,t,n){return d(e,function(e){return b(e).then(function(e){return t.apply(void 0,e)},n)},n)}function m(e,t,n){var r=o();return C(function(){p(e).promiseDispatch(r.resolve,t,n)}),r.promise}function g(e){return function(t){var n=M(arguments,1);return m(t,e,n)}}function y(e){var t=M(arguments,1);return W(e,t)}function b(e){return d(e,function(e){var t=e.length;if(0===t)return p(e);var n=o();return _(e,function(r,i,s){l(i)?(e[s]=a(i),0===--t&&n.resolve(e)):d(i,function(r){e[s]=r,0===--t&&n.resolve(e)}).fail(n.reject)},void 0),n.promise})}function w(e,t){return d(e,void 0,t)}function E(e,t){var n=M(arguments,2),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise}var S=i(),x,T=function(){},N=Object.freeze||T;"undefined"!=typeof cajaVM&&(N=cajaVM.def);var C;if("undefined"!=typeof process)C=process.nextTick;else if("function"==typeof setImmediate)C=setImmediate;else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,L={},A=L;k.port1.onmessage=function(){L=L.next;var e=L.task;delete L.task,e()},C=function(e){A=A.next={task:e},k.port2.postMessage(0)}}else C=function(e){setTimeout(e,0)};var O;Function.prototype.bind?(O=Function.prototype.bind,O=O.bind(O.call)):O=function(e){return function(){return e.call.apply(e,arguments)}};var M=O(Array.prototype.slice),_=O(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),D=O(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),P=O(Array.prototype.map||function(e,t){var n=this,r=[];return _(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),H=Object.create||function(e){function t(){}return t.prototype=e,new t},B=Object.keys||function(e){var t=[],n;for(n in e)t.push(n);return t},j=Object.prototype.toString,F;F="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var I="From previous event:";t.nextTick=C,t.defer=o,o.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(M(arguments,1)):e.resolve(n)}},t.promise=function(e){var t=o();return y(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise},t.makePromise=u,u.prototype.then=function(e,t,n){return d(this,e,t,n)},u.prototype.thenResolve=function(e){return d(this,function(){return e})},_("isResolved isFulfilled isRejected dispatch when spread get put del post send invoke keys fapply fcall fbind all allResolved timeout delay catch finally fail fin progress end done nfcall nfapply nfbind ncall napply nbind npost nsend ninvoke nend nodeify".split(" "),function(e,n){u.prototype[n]=function(){return t[n].apply(t,[this].concat(M(arguments)))}},void 0),u.prototype.toSource=function(){return this.toString()},u.prototype.toString=function(){return"[object Promise]"},N(u.prototype),t.nearer=a,t.isPromise=f,t.isResolved=function(e){return l(e)||c(e)},t.isFulfilled=l,t.isRejected=c;var q=[],R=[],U;t.reject=h,t.resolve=p,t.master=function(e){return u({isDef:function(){}},function(t,n){return m(e,t,n)},function(){return a(e)})},t.when=d,t.spread=v,t.async=function(e){return function(){function t(e,t){var s;try{s=n[e](t)}catch(o){return j(o)==="[object StopIteration]"||o instanceof F?o.value:h(o)}return d(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"send"),i=t.bind(t,"throw");return r()}},t["return"]=function(e){throw new F(e)},t.promised=function(e){return function(){return v([this,b(arguments)],function(t,n){return e.apply(t,n)})}},t.dispatch=m,t.dispatcher=g,t.get=g("get"),t.put=g("put"),t["delete"]=t.del=g("del");var z=t.post=g("post");t.send=function(e,t){var n=M(arguments,2);return z(e,t,n)},t.invoke=s(t.send,"invoke","send");var W=t.fapply=g("apply");t["try"]=y,t.fcall=y,t.fbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments));return W(e,n)}},t.keys=g("keys"),t.all=b,t.allResolved=function(e){return d(e,function(e){return d(b(P(e,function(e){return d(e,T,T)})),function(){return P(e,p)})})},t["catch"]=t.fail=w,t.progress=function(e,t){return d(e,void 0,void 0,t)},t["finally"]=t.fin=function(e,t){return d(e,function(e){return d(t(),function(){return e})},function(e){return d(t(),function(){return h(e)})})},t.done=function(e,r,i,s){r=r||i||s?d(e,r,i,s):e,w(r,function(r){C(function(){n(r,e);if(!t.onerror)throw r;t.onerror(r)})})},t.timeout=function(e,t){var n=o(),r=setTimeout(function(){n.reject(Error("Timed out after "+t+" ms"))},t);return d(e,function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)}),n.promise},t.delay=function(e,t){t===void 0&&(t=e,e=void 0);var n=o();return setTimeout(function(){n.resolve(e)},t),n.promise},t.nfapply=function(e,t){var n=M(t),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise},t.nfcall=function(e){var t=M(arguments,1),n=o();return t.push(n.makeNodeResolver()),W(e,t).fail(n.reject),n.promise},t.nfbind=function(e){var t=M(arguments,1);return function(){var n=t.concat(M(arguments)),r=o();return n.push(r.makeNodeResolver()),W(e,n).fail(r.reject),r.promise}},t.npost=function(e,t,n){var n=M(n),r=o();return n.push(r.makeNodeResolver()),z(e,t,n).fail(r.reject),r.promise},t.nsend=E,t.ninvoke=s(E,"ninvoke","nsend"),t.nodeify=function(e,t){if(!t)return e;e.then(function(e){C(function(){t(null,e)})},function(e){C(function(){t(e)})})};var X=i()}),n("api/sketchfab-iframe",["vendors/q/q.min"],function(e){var t=function(e){this._iframe=e,e.src="about:blank",this._uid=undefined,window.location.href.search("sketchfab")===-1?this._domain=window.location.protocol+"//sketchfab.com":this._domain="///"+window.location.hostname,this._callback=undefined,this._events={};var t=this,n=function(e){if(e.data===undefined||e.data.source===undefined)return;t.message(e.data)};window.addEventListener("message",n,!1),this._messageFunction=n},n=function(e,t){if(e.error!==undefined){if(e.status==="lookat"&&e.error==="camera animation not finished")return;this._events[e.status].reject(e.error),t&&(this._events[e.status]=undefined)}else this._events[e.status].resolve!==undefined&&(this._events[e.status].resolve(e),t&&(this._events[e.status]=undefined))};return t.prototype={setMessageCallback:function(e){this._callback=e},message:function(e){if(e.source!==this._uid)return;e.status!==undefined&&(e.status==="load"?n.call(this,e,!1):n.call(this,e,!0)),this._callback&&this._callback.call(this,e)},load:function(t,n){if(this._events.load!==undefined)return this._events.load.promise;var r=this,i=function(e){var t="?preload=1";return n&&Object.keys(n).forEach(function(e,r,i){var s;n[e]!==undefined&&(s=n[e].toString()),t+="&"+e+"="+s}),r._domain+"/embed/"+e+t};this._uid=t,this._events.load=e.defer();var s=i(t);return this._iframe.src=s,this._events.load.promise},start:function(){return this._events.start!==undefined?this._events.start.promise:(this._events.start=e.defer(),this._iframe.contentWindow.postMessage({command:"start"},"*"),this._events.start.promise)},autospin:function(t){return this._events.autospin!==undefined?this._events.autospin.promise:(this._events.autospin=e.defer(),this._iframe.contentWindow.postMessage({command:"autospin",spin:t},"*"),this._events.autospin.promise)},lookat:function(t,n,r){var i="lookat";return this._events[i]!==undefined&&!this._events[i].promise.isResolved()&&this._events[i].reject("new animation ran"),this._events[i]=e.defer(),this._iframe.contentWindow.postMessage({command:i,eye:t,target:n,duration:r},"*"),this._events[i].promise},stop:function(t){return this._events.stop!==undefined?this._events.stop.promise:(this._events.stop=e.defer(),this._iframe.contentWindow.postMessage({command:"stop"},"*"),this._events.stop.promise)},finish:function(){window.removeEventListener("message",this._messageFunction)}},t.Q=e,t}),n("lib/sketchfab-iframe",["require","api/sketchfab-iframe"],function(e){var t=e("api/sketchfab-iframe"),n=t.Q;return{version:"0.0.1",Sketchfab:t,Q:n}}),t("lib/sketchfab-iframe")});